### 异步逻辑的顺序化

在异步程序的执行过程中，有些任务可能会随时发生，跟程序中的其他不部分在做什么没关系，什么时候做这些任务都不会出问题。但也有任务只能在某些特定的任务之前或之后做。

控制一组异步任务顺序的执行分为两类：**串行**和**并行**。



需要一个接着一个执行的任务叫做**串行任务**。创建一个目录并往里面放一个文件的任务就是串行的，你不能在创建目录前往里放文件。

不需要一个接着一个执行的任务叫做**并行任务**。这些任务彼此之间开始和结束的事件并不重要，但在后续逻辑执行之前他们应该全部执行完成。下载几个文件然后把他们压缩到一个zip文件中就是并行任务。这些文件的下载可以同时进行，但在创建归档zip文件前已改全部下载完成。

跟踪串行和并行的流程控制就是要做编程记账的工作。在实现串行化流程化控制时，需要跟踪当前执行的任务，或维护一个尚未执行完成的任务。实行并行化流程控制时需要跟踪有多少个任务要执行完成了。



### 何时使用串行化流程控制

可以使用回调让几个一部任务按顺序执行，但如果任务很多，必须组织一下，否则过多的回调嵌套会把代码搞得很乱。

下面这段代码就是用回调让任务顺序执行的。这个例子用